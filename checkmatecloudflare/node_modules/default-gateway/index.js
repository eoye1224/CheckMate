"use strict";

<<<<<<< HEAD
const os = require("os");
const platform = os.platform();

if ([
=======
const {platform, type} = require("os");

const supportedPlatforms = new Set([
  "aix",
>>>>>>> features/task-display-and-function
  "android",
  "darwin",
  "freebsd",
  "linux",
  "openbsd",
  "sunos",
<<<<<<< HEAD
  "win32",
  "aix",
].indexOf(platform) !== -1) {
  let file;
  if (platform === "aix") {
    // AIX `netstat` output is compatible with Solaris
    file = `${os.type() === "OS400" ? "ibmi" : "sunos"}.js`;
  } else {
    file = `${platform}.js`;
  }

  const m = require(`./${file}`);
=======
  "win32"
]);

const plat = platform();

if (supportedPlatforms.has(plat)) {
  let file = plat;
  if (plat === "aix") {
    file = type() === "OS400" ? "ibmi" : "sunos"; // AIX `netstat` output is compatible with Solaris
  }

  const m = require(`./${file}.js`);
>>>>>>> features/task-display-and-function
  module.exports.v4 = () => m.v4();
  module.exports.v6 = () => m.v6();
  module.exports.v4.sync = () => m.v4.sync();
  module.exports.v6.sync = () => m.v6.sync();
} else {
<<<<<<< HEAD
  const unsupported = () => { throw new Error(`Unsupported Platform: ${platform}`); };
  module.exports.v4 = unsupported;
  module.exports.v6 = unsupported;
  module.exports.v4.sync = unsupported;
  module.exports.v6.sync = unsupported;
=======
  const err = new Error(`Unsupported Platform: ${plat}`);
  module.exports.v4 = () => Promise.reject(err);
  module.exports.v6 = () => Promise.reject(err);
  module.exports.v4.sync = () => { throw err; };
  module.exports.v6.sync = () => { throw err; };
>>>>>>> features/task-display-and-function
}
